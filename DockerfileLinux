FROM ubuntu:latest

RUN apt-get update && apt-get install -y \
    build-essential \
    cmake \
    git \
    ccache \
    && rm -rf /var/lib/apt/lists/*

RUN useradd jenkins --shell /bin/bash --create-home

RUN mkdir -p /home/jenkins/.cache/ccache/tmp \
    && chown -R jenkins:jenkins /home/jenkins/.cache/ccache

ENV CCACHE_DIR /home/jenkins/.cache/ccache

USER jenkins